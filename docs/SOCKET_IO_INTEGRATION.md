# Socket.IO –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –¥–ª—è –ú–∞—Ç–µ—Ä–∏–∞–ª–æ–≤

## üìã –û–±–∑–æ—Ä

–î–∞–Ω–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –º–µ–∂–¥—É –∫–ª–∏–µ–Ω—Ç–∞–º–∏ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º–∏ –∏ –∏—Ö –≥—Ä—É–ø–ø–∞–º–∏. –ö–æ–≥–¥–∞ –æ–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–µ—Ç, –æ–±–Ω–æ–≤–ª—è–µ—Ç –∏–ª–∏ —É–¥–∞–ª—è–µ—Ç –º–∞—Ç–µ—Ä–∏–∞–ª/–≥—Ä—É–ø–ø—É, –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞—é—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### 1. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ SocketProvider

–û–±–µ—Ä–Ω–∏—Ç–µ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ `SocketProvider`:

```tsx
import { SocketProvider } from './contexts/SocketContext';

function App() {
  return (
    <SocketProvider serverUrl="http://localhost:5000" autoConnect={true}>
      {/* –í–∞—à–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã */}
    </SocketProvider>
  );
}
```

### 2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏ÔøΩÔøΩ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö

```tsx
import { useSocket } from './contexts/SocketContext';
import { useMaterialsSocket } from './hooks/useMaterialsSocket';

function MyComponent() {
  const { isConnected, socket } = useSocket();
  
  // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
  useMaterialsSocket();

  return (
    <div>
      {isConnected ? 'üü¢ –ü–æ–¥–∫–ª—é—á–µ–Ω–æ' : 'üî¥ –û—Ç–∫–ª—é—á–µ–Ω–æ'}
    </div>
  );
}
```

## üé® CSS –°—Ç–∏–ª–∏

–ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ —Å—Ç–∏–ª–∏ –¥–ª—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:

```tsx
import socketStyles from './styles/SocketStyles.module.css';

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
<span className={`${socketStyles.connectionDot} ${isConnected ? socketStyles.connected : socketStyles.disconnected}`} />

// Real-time –±–µ–π–¥–∂
{isConnected && (
  <span className={socketStyles.realtimeBadge}>üîÑ</span>
)}
```

## üì° –°–æ–±—ã—Ç–∏—è Socket.IO

### –°–æ–±—ã—Ç–∏—è –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤:
- `materialCreated` - —Å–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π –º–∞—Ç–µ—Ä–∏–∞–ª
- `materialUpdated` - –º–∞—Ç–µ—Ä–∏–∞–ª –æ–±–Ω–æ–≤–ª–µ–Ω
- `materialDeleted` - –º–∞—Ç–µ—Ä–∏–∞–ª —É–¥–∞–ª–µ–Ω
- `materialLinkedToGroup` - –º–∞—Ç–µ—Ä–∏–∞–ª –ø—Ä–∏–≤—è–∑–∞–Ω –∫ –≥—Ä—É–ø–ø–µ
- `materialUnlinkedFromGroup` - –º–∞—Ç–µ—Ä–∏–∞–ª –æ—Ç–≤—è–∑–∞–Ω –æ—Ç –≥—Ä—É–ø–ø—ã

### –°–æ–±—ã—Ç–∏—è –≥—Ä—É–ø–ø –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤:
- `materialGroupCreated` - —Å–æ–∑–¥–∞–Ω–∞ –Ω–æ–≤–∞—è –≥—Ä—É–ø–ø–∞
- `materialGroupUpdated` - –≥—Ä—É–ø–ø–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞  
- `materialGroupDeleted` - –≥—Ä—É–ø–ø–∞ —É–¥–∞–ª–µ–Ω–∞

## üè† –ö–æ–º–Ω–∞—Ç—ã (Rooms)

–ö–ª–∏–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ –∫–æ–º–Ω–∞—Ç–∞–º:
- `joinMaterialsRoom` - –¥–ª—è —Å–æ–±—ã—Ç–∏–π –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
- `joinMaterialGroupsRoom` - –¥–ª—è —Å–æ–±—ã—Ç–∏–π –≥—Ä—É–ø–ø

## üîß –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### SocketConnectionIndicator
–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ–º:

```tsx
<SocketConnectionIndicator 
  position="bottom-right" 
  showDetails={true} 
/>
```

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Socket.IO:
- `MaterialSettingsPage` - –æ–±–µ—Ä–Ω—É—Ç –≤ SocketProvider
- `MaterialsList` - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- `MaterialGroups` - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è  
- `MaterialForm` - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞–µ—Ç –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### SocketProvider –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
- `serverUrl` - URL Socket.IO —Å–µ—Ä–≤–µ—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: http://localhost:5000)
- `autoConnect` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: true)

### –ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:
- –ú–∞–∫—Å–∏–º—É–º –ø–æ–ø—ã—Ç–æ–∫: 5
- –ó–∞–¥–µ—Ä–∂–∫–∞: 3000ms —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–º —É–≤–µ–ª–∏—á–µ–Ω–∏–µ–º
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ —Ä–∞–∑—Ä—ã–≤–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

## üéØ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å React Query

Socket.IO —Å–æ–±—ã—Ç–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç –∫—ç—à React Query:

```tsx
// –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–æ–±—ã—Ç–∏—è materialCreated
queryClient.invalidateQueries({ queryKey: QUERY_KEYS.materials });
queryClient.invalidateQueries({ queryKey: QUERY_KEYS.materialGroups });
```

## üêõ –û—Ç–ª–∞–¥–∫–∞

–í–∫–ª—é—á–∏—Ç–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:
- ‚úÖ Socket.IO –ø–æ–¥–∫–ª—é—á–µ–Ω
- ‚ùå Socket.IO –æ—Ç–∫–ª—é—á–µ–Ω  
- üîÑ –ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
- üì¶ –°–æ–±—ã—Ç–∏—è –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
- üìÅ –°–æ–±—ã—Ç–∏—è –≥—Ä—É–ø–ø

## üì± –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å

–°—Ç–∏–ª–∏ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤:
- –°–∫—Ä—ã—Ç–∏–µ —Ç–µ–∫—Å—Ç–∞ –Ω–∞ –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö
- –£–º–µ–Ω—å—à–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–≤ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è touch-—É—Å—Ç—Ä–æ–π—Å—Ç–≤

## üåì –¢–µ–º–Ω–∞—è —Ç–µ–º–∞

–°—Ç–∏–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç —Ç–µ–º–Ω—É—é —Ç–µ–º—É –∏ –≤—ã—Å–æ–∫–∏–π –∫–æ–Ω—Ç—Ä–∞—Å—Ç:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–µ–º—ã —Å–∏—Å—Ç–µ–º—ã
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ `prefers-color-scheme: dark`
- –†–µ–∂–∏–º –≤—ã—Å–æ–∫–æ–≥–æ –∫–æ–Ω—Ç—Ä–∞—Å—Ç–∞

## ‚ôø –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å

- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
- ARIA-–º–µ—Ç–∫–∏ –¥–ª—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
- –í—ã—Å–æ–∫–∏–π –∫–æ–Ω—Ç—Ä–∞—Å—Ç –¥–ª—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- –¢–µ–∫—Å—Ç–æ–≤—ã–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω—ã—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤